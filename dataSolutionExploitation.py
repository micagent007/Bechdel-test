import os
path = 'C:\\Users\\arthu\\Desktop\\ENPC\\2A\\1S\\Hack\\2_Test_Bechdel\\voxconverse\\rttm\\'

ListFiles = os.listdir(path) # A list of all the files in the folder (our data set)


dataSolution={}

for file in ListFiles:
    dataSolution[file] = []
    f = open('C:\\Users\\arthu\\Desktop\\ENPC\\2A\\1S\\Hack\\2_Test_Bechdel\\voxconverse\\rttm\\' + file, 'r')
    Script = f.read().split(" ")
    for k in range((len(Script) + 1) // 10):
        dataSolution[file].append((Script[9 * k + 7].lstrip('spk'),float(Script[9 * k + 3]), float(Script[9 * k + 4]) + float(Script[9 * k + 3])))
    # we want to class the speaker, so firts people who speak are 0, ...
    dataSolution[file].sort(key=lambda x: x[1])
    List=[dataSolution[file][k][0] for k in range (len(dataSolution[file]))]
    L=list(dict.fromkeys(List))
    C=[]
    for i,k in enumerate(L):
        name = '0' + str(i)
        if i > 9:
            name = str(i)
        C.append((k,name))
    Newdata=[]
    for l in range (len(dataSolution[file])):
        for k in range(len(C)):
            if dataSolution[file][l][0]==C[k][0]:
                Newdata.append((C[k][1],dataSolution[file][l][1],dataSolution[file][l][2]))
    dataSolution[file]=Newdata.copy()
    f.close()
    
TimeStepSolution={}
for file in ListFiles:
    temps = dataSolution[file][-1][2]
    TimeStepSolution[file] = []
    l=0
    lmax=len(dataSolution[file])
    for k in range (0,int(temps*10),1):
        if k/10>=dataSolution[file][l][1]:
            if k/10<dataSolution[file][l][2]:
                TimeStepSolution[file].append(dataSolution[file][l][0])
            else:
                l+=1
        else:
            TimeStepSolution[file].append('none')
